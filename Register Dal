const {mongoose, Schema} = require('mongoose');
// const bcrypt = require('bcrypt');
const connectionString = "mongodb://localhost:27017/Userio";
//mongodb+srv://Johanna:306879@usuario.uejhtxs.mongodb.net/
mongoose.connect(connectionString, {useUnifiedTopology: true}); //, useNewParser: true
const connection = mongoose.connection;

connection.once("open", () => {
    console.log("goose Successfully connected");
})

const Userio = new Schema(
    {
        username: String,
        password: String,
        confirmPassword:String ,
        email: String,
        confirmEmail: String

    },
    {collection: "Users"}
);

const userCollection = mongoose.model("Users", Userio);

exports.dal = {
    createUser: async function (username, password, email, confirmPassword, confirmEmail) {
        const newUser = new userCollection({
            username: username,
            password: password,
            confirmPassword: confirmPassword,
            email: email,
            confirmEmail: confirmEmail
        });

        const savedUser = await newUser.save();
        console.log("New user added: ", savedUser);
        return savedUser;
    }
}

function beginningUsers(){
    var beginningUsers = [
        {username: "haunted_ghoul", password: "Tuff@12top", confirmPassword: "Tuff@12top",
        email: "mmitchell@student.neumont.edu", confirmEmail: "mmitchell@student.neumont.edu"},
        
    ]
    userCollection.insertMany(beginningUsers);
}

// beginningUsers();
